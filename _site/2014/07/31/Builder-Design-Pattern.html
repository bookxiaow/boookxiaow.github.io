<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Builder Design Pattern</title>
   <link rel="shortcut icon" type="image/png" href="/images/heng.png">
   <meta name="author" content="Wei Heng" />
   <link href="http://feeds.feedburner.com/tom-preston-werner" rel="alternate" title="Tom Preston-Werner" type="application/atom+xml" />
   <meta name="readability-verification" content="QCzSs992GxmRYRKVpPeZ6LE2tS8aYKxsSSQKV8YM"/>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" />
   <link rel="stylesheet" href="/stylesheets/pygment_trac.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/stylesheets/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">Heng</a>
    <a class="extra" href="/">home</a>
  </div>

  <div id="post">
<h1>Builder Design Pattern</h1>

<p class="meta">31 July 2014 - Beijing</p>


<h4>At First Sight of Builder Pattern</h4>

<p>The first time I encountered the Builder Pattern would date back to the beautiful internship time in Red Hat. What inspired me a lot is its strange setter way.</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="lineno"> 1</span> <span class="kd">class</span> <span class="nc">PeopleBuilder</span> <span class="o">{</span>
<span class="lineno"> 2</span>     <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;Joseph&quot;</span>
<span class="lineno"> 3</span>     <span class="kd">private</span> <span class="kt">int</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">24</span><span class="o">;</span>
<span class="lineno"> 4</span>     <span class="kd">private</span> <span class="n">String</span> <span class="n">talent</span> <span class="o">=</span> <span class="s">&quot;programming&quot;</span><span class="o">;</span> 
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span>     <span class="kd">public</span> <span class="n">PeopleBuilder</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno"> 7</span>  <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
<span class="lineno"> 8</span>  <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno"> 9</span>     <span class="o">}</span>
<span class="lineno">10</span>     <span class="kd">public</span> <span class="n">PeopleBuilder</span> <span class="nf">setAge</span><span class="o">(</span><span class="kt">int</span> <span class="n">age</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">11</span>         <span class="k">this</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">age</span><span class="o">;</span>
<span class="lineno">12</span>  <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno">13</span>     <span class="o">}</span>
<span class="lineno">14</span>     <span class="kd">public</span> <span class="n">PeopleBuilder</span> <span class="nf">setTalent</span><span class="o">(</span><span class="n">String</span> <span class="n">talent</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">15</span>  <span class="k">this</span><span class="o">.</span><span class="na">talent</span> <span class="o">=</span> <span class="n">talent</span><span class="o">;</span>
<span class="lineno">16</span>  <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno">17</span>     <span class="o">}</span>
<span class="lineno">18</span> <span class="o">}</span></code></pre></div>


<p>The function will return object itself, in setter methods. Also these setter methods can avoid too many parameters in a function invocation process, such as:</p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="lineno"> 1</span> <span class="n">PeopleBuilder</span> <span class="n">peopleBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">PeopleBuilder</span><span class="o">();</span>
<span class="lineno"> 2</span>     <span class="cm">/*</span>
<span class="lineno"> 3</span> <span class="cm">     * Common definition for the doWork() function:</span>
<span class="lineno"> 4</span> <span class="cm">     */</span>
<span class="lineno"> 5</span>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doWork</span><span class="o">(</span><span class="n">String</span> <span class="n">workName</span><span class="o">,</span> <span class="kt">int</span> <span class="n">age</span><span class="o">,</span> <span class="n">String</span> <span class="n">talent</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno"> 6</span>  <span class="k">if</span><span class="o">(</span><span class="n">age</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno"> 7</span>      <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;Can not employee cirtical labour!&quot;</span><span class="o">);</span>
<span class="lineno"> 8</span>      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalAgeException</span><span class="o">(</span><span class="s">&quot;age litter than 18&quot;</span><span class="o">);</span>
<span class="lineno"> 9</span>         <span class="o">}</span>
<span class="lineno">10</span>  <span class="n">doTalent</span><span class="o">(</span><span class="n">talent</span><span class="o">);</span>
<span class="lineno">11</span>         <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Name:[%s], Talent:[%s]&quot;</span><span class="o">,</span> <span class="n">workName</span><span class="o">,</span> <span class="n">talent</span><span class="o">));</span>
<span class="lineno">12</span>     <span class="o">}</span>
<span class="lineno">13</span>     <span class="cm">/*</span>
<span class="lineno">14</span> <span class="cm">     * define function with PeopleBuilder object as the only parameters.</span>
<span class="lineno">15</span> <span class="cm">     */</span>
<span class="lineno">16</span>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doWork</span><span class="o">(</span><span class="n">peopleBuilder</span><span class="o">.</span><span class="na">setAge</span><span class="o">(</span><span class="mi">19</span><span class="o">).</span><span class="na">setName</span><span class="o">(</span><span class="s">&quot;Heng&quot;</span><span class="o">)</span>
<span class="lineno">17</span>  <span class="o">.</span><span class="na">setTalent</span><span class="o">(</span><span class="s">&quot;programming&quot;</span><span class="o">))</span> <span class="o">{</span>
<span class="lineno">18</span>  <span class="k">if</span><span class="o">(</span><span class="n">peopleBuilder</span><span class="o">.</span><span class="na">getAge</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">18</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">19</span>      <span class="n">log</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="s">&quot;Can not employee cirtical labour!&quot;</span><span class="o">);</span>
<span class="lineno">20</span>      <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalAgeException</span><span class="o">(</span><span class="s">&quot;age litter than 18&quot;</span><span class="o">);</span>
<span class="lineno">21</span>         <span class="o">}</span>
<span class="lineno">22</span>  <span class="n">doTalent</span><span class="o">(</span><span class="n">peopleBuilder</span><span class="o">.</span><span class="na">getTalent</span><span class="o">());</span>
<span class="lineno">23</span>  <span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">&quot;Name:[$s], Talent:[%s]&quot;</span><span class="o">,</span> <span class="n">peopleBuilder</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span>
<span class="lineno">24</span>      <span class="o">,</span> <span class="n">peopleBuilder</span><span class="o">.</span><span class="na">getTalent</span><span class="o">());</span>
<span class="lineno">25</span>     <span class="o">}</span></code></pre></div>


<p><strong>At the first glance</strong> of the above <strong><em>Builder Pattern</em></strong> usage, it resoved the too many parameters problem. However, when <code>doWork()</code> function invoke the <code>PeopleBuilder</code> class, it looks really strange and weild. Now the PeopleBuilder looks more like a POJO but a Builder. The <code>get</code> methods in Builder really strange. So the most important thing to do is to just figure out what the adventages and disadvantages do the builder pattern suit:   <br/>
1. <em>if you find that there are too many parameters in a function invocation, you could take a consideration: could it be encapsulated into a Java Bean Object. and with necessary </em><strong>get</strong><em>, </em><strong>set</strong><em> methods</em>. <br/>
2. <em>Still, you find that the encapsulated class could not satify with your requirement. some construct parameters are necessary for you and some a optional. But all they could only be assigned value at first construct stage of the object. The object become read only, and be immutable.</em><br/>
3. <em>Then, Builder Pattern is becoming your first choice.</em></p>

<h4>An Example of Classical Builder Pattern.</h4>

<p><strong>mail sender builder</strong></p>

<div class="highlight"><pre><code class="language-java" data-lang="java"><span class="lineno"> 1</span> <span class="n">Class</span> <span class="n">EmailSender</span> <span class="o">{</span>
<span class="lineno"> 2</span>  <span class="cm">/*</span>
<span class="lineno"> 3</span> <span class="cm">     * required parameters for send a email.</span>
<span class="lineno"> 4</span> <span class="cm">     */</span>
<span class="lineno"> 5</span>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">subject</span><span class="o">;</span>
<span class="lineno"> 6</span>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">from</span><span class="o">;</span>
<span class="lineno"> 7</span>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">to</span><span class="o">;</span>
<span class="lineno"> 8</span>  <span class="cm">/*</span>
<span class="lineno"> 9</span> <span class="cm">     * optional parameters.</span>
<span class="lineno">10</span> <span class="cm">     */</span>
<span class="lineno">11</span>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">cc</span><span class="o">;</span>
<span class="lineno">12</span>  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">body</span><span class="o">;</span>
<span class="lineno">13</span> 
<span class="lineno">14</span>  <span class="cm">/*</span>
<span class="lineno">15</span> <span class="cm">     * private construct function with EmailSenderBuilder.</span>
<span class="lineno">16</span> <span class="cm">     */</span>
<span class="lineno">17</span>  <span class="kd">private</span> <span class="nf">EmailSender</span><span class="o">(</span><span class="n">EmailSenderBuilder</span> <span class="n">emailBuilder</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">18</span>      <span class="k">this</span><span class="o">.</span><span class="na">subject</span> <span class="o">=</span> <span class="n">emailBuilder</span><span class="o">.</span><span class="na">subject</span><span class="o">;</span>
<span class="lineno">19</span>      <span class="k">this</span><span class="o">.</span><span class="na">from</span> <span class="o">=</span> <span class="n">emailBuilder</span><span class="o">.</span><span class="na">from</span><span class="o">;</span>
<span class="lineno">20</span>      <span class="k">this</span><span class="o">.</span><span class="na">to</span> <span class="o">=</span> <span class="n">emailBuilder</span><span class="o">.</span><span class="na">to</span><span class="o">;</span>
<span class="lineno">21</span>      <span class="k">this</span><span class="o">.</span><span class="na">cc</span> <span class="o">=</span> <span class="n">emailBuilder</span><span class="o">.</span><span class="na">cc</span><span class="o">;</span>
<span class="lineno">22</span>      <span class="k">this</span><span class="o">.</span><span class="na">body</span> <span class="o">=</span> <span class="n">emailBuilder</span><span class="o">.</span><span class="na">body</span><span class="o">;</span>
<span class="lineno">23</span>  <span class="o">}</span>
<span class="lineno">24</span>  <span class="cm">/**</span>
<span class="lineno">25</span> <span class="cm">     * noted the static class accessor.</span>
<span class="lineno">26</span> <span class="cm">     */</span>
<span class="lineno">27</span>       <span class="kd">public</span> <span class="kd">static</span> <span class="n">EmailSenderBuilder</span> <span class="o">{</span>
<span class="lineno">28</span>           <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">subject</span><span class="o">;</span>
<span class="lineno">29</span>           <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">from</span><span class="o">;</span>
<span class="lineno">30</span>           <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">to</span><span class="o">;</span>
<span class="lineno">31</span>           <span class="kd">private</span> <span class="n">String</span> <span class="n">cc</span><span class="o">;</span>   <span class="cm">/* non-final statement compared to EmailSender */</span>
<span class="lineno">32</span>           <span class="kd">private</span> <span class="n">String</span> <span class="n">body</span><span class="o">;</span> <span class="cm">/* non-final statement compred to EmailSender */</span>
<span class="lineno">33</span>           <span class="kd">public</span> <span class="nf">EmailSenderBuilder</span><span class="o">(</span><span class="n">String</span> <span class="n">subject</span><span class="o">,</span> <span class="n">String</span> <span class="n">from</span><span class="o">,</span> <span class="n">String</span> <span class="n">to</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">34</span>               <span class="k">this</span><span class="o">.</span><span class="na">subject</span> <span class="o">=</span> <span class="n">subject</span><span class="o">;</span>
<span class="lineno">35</span>               <span class="k">this</span><span class="o">.</span><span class="na">from</span> <span class="o">=</span> <span class="n">from</span><span class="o">;</span>
<span class="lineno">36</span>               <span class="k">this</span><span class="o">.</span><span class="na">to</span> <span class="o">=</span> <span class="n">to</span><span class="o">;</span>
<span class="lineno">37</span>       <span class="o">}</span>
<span class="lineno">38</span>           <span class="cm">/**</span>
<span class="lineno">39</span> <span class="cm">          * fluent interface idiom .</span>
<span class="lineno">40</span> <span class="cm">          */</span>
<span class="lineno">41</span>           <span class="kd">public</span> <span class="nf">subject</span><span class="o">(</span><span class="n">String</span> <span class="n">subject</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">42</span>               <span class="k">this</span><span class="o">.</span><span class="na">subject</span> <span class="o">=</span> <span class="n">subject</span><span class="o">;</span>
<span class="lineno">43</span>               <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno">44</span>           <span class="o">}</span>
<span class="lineno">45</span>           <span class="kd">public</span> <span class="nf">from</span><span class="o">(</span><span class="n">String</span> <span class="n">from</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">46</span>               <span class="k">this</span><span class="o">.</span><span class="na">from</span> <span class="o">=</span> <span class="n">from</span><span class="o">;</span>
<span class="lineno">47</span>               <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno">48</span>           <span class="o">}</span>
<span class="lineno">49</span>           <span class="kd">public</span> <span class="nf">to</span><span class="o">(</span><span class="n">String</span> <span class="n">to</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">50</span>               <span class="k">this</span><span class="o">.</span><span class="na">to</span> <span class="o">=</span> <span class="n">to</span><span class="o">;</span>
<span class="lineno">51</span>               <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="lineno">52</span>           <span class="o">}</span>
<span class="lineno">53</span>           <span class="cm">/**</span>
<span class="lineno">54</span> <span class="cm">          * It&#39;s definitely cool! Also you can implement the logic </span>
<span class="lineno">55</span> <span class="cm">          * condition in build according to your requirement.</span>
<span class="lineno">56</span> <span class="cm">          */</span>
<span class="lineno">57</span>           <span class="kd">public</span> <span class="n">EmailSender</span> <span class="nf">build</span><span class="o">()</span> <span class="o">{</span>
<span class="lineno">58</span>               <span class="k">return</span> <span class="k">new</span> <span class="nf">EmailSender</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="lineno">59</span>           <span class="o">}</span>
<span class="lineno">60</span>       <span class="o">}</span>
<span class="lineno">61</span>     <span class="o">}</span></code></pre></div>


<p>So long and thanks for all the fish!</p>

<h4>Reference</h4>

<ul>
<li><a href="http://www.javacodegeeks.com/2013/01/the-builder-pattern-in-practice.html">The builder pattern in practice</a>.</li>
<li><a href="http://en.wikipedia.org/wiki/Builder_pattern">Builder Pattern</a>.</li>
</ul>


</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>28 May 2015</span> &raquo; <a href="/2015/05/28/singleton-design-pattern.html">Singleton Design Pattern</a></li>
    
      <li><span>11 Nov 2014</span> &raquo; <a href="/2014/11/11/Common-ShortKey-And-Command-On-MacOSX.html">Common ShortKey And Command on MacOSX</a></li>
    
      <li><span>09 Aug 2014</span> &raquo; <a href="/translation/2014/08/09/add-comment-to-jekyll-blog-with-disqus.html">Add Comment to Jekyll Blog with Disqus</a></li>
    
  </ul>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'josepheng'; // required: replace example with your forum shortname
    /* * * This turns developer mode on, Make sure you remove this before you push this to your live site. * * * /
    /* * * var disqus_developer = 1;  * * * /

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>



  <div class="footer">
    <div class="contact">
      <p>
        Wei Heng<br />
        lengerfulluse@gmail.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/lengerfulluse/">github.com/lengerfulluse</a><br />
      </p>
    </div>
    <div class="rss">
      <a href="http://feeds.feedburner.com/joseph-heng">
        <img src="/assets/img/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
</div>

<a href="http://github.com/lengerfulluse"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
</script>
<!-- ClickTale end of Bottom part -->

<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6016902-1");
pageTracker._trackPageview();
</script>
<!-- Google Analytics end -->

</body>
</html>
