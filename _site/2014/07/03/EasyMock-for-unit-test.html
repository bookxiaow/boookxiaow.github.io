<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>EasyMock for Unit Test</title>
   <link rel="shortcut icon" type="image/png" href="/images/heng.png">
   <meta name="author" content="Wei Heng" />
   <link href="http://feeds.feedburner.com/tom-preston-werner" rel="alternate" title="Tom Preston-Werner" type="application/atom+xml" />
   <meta name="readability-verification" content="QCzSs992GxmRYRKVpPeZ6LE2tS8aYKxsSSQKV8YM"/>

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/stylesheets/syntax.css" type="text/css" />
   <link rel="stylesheet" href="/stylesheets/pygment_trac.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/stylesheets/screen.css" type="text/css" media="screen, projection" />

   <!-- Typekit -->
   <script type="text/javascript" src="http://use.typekit.com/jpd0pfm.js"></script>
   <script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="site">
  <div class="title">
    <a href="/">Heng</a>
    <a class="extra" href="/">home</a>
  </div>

  <div id="post">
<h1>EasyMock for Unit Test</h1>

<p class="meta">03 July 2014 - Beijing</p>


<p>I noticed lot of projects code with <strong>unit test</strong> as a necessary part. Unfortunately that, I didn't have the opportunity to do it myself. Upon coming out from the campus, it naturally become a necessary part of the carel talent of a SDE.<br/>
Common and basic test procedure framework will be <a href="http://junit.org">Junit</a>, which lay the fundation of test. Such as <code>@Before,@Test,@After</code> workflow, <code>Assertions, Test Runners, Ignoring, Rule</code>. However, when encounter complex and sophisticated system, the dependency of functions may become perplexing. It's impossible to construct all this objects as the input of a to-be tested function. <strong>Mock</strong> conception arise naturally. Well in plain word, could we just mock these dependency objects, give their input parameters and expected behavior or return value. And it just exactly benefit what our test case needed. There are lots of good mock framework, such as <a href="http://jmock.org" title="JMock Official">JMock</a>, <a href="http://easymock.org" title="EasyMock official">EasyMock</a>. All roads to Roma. I spent about three days to learn the JMock for a particular unit test code. When I come from JMock to EasyMock, I found that most prior knowledge and experience can be come in handy. I take notes here as a reminder. <br/>
 1. From scratch, I just know a little about junit. If I want to write tests for a class, the meta element for test is functions. So I need to construct the context for a function test, such as the corresponding main class, the input parameters for a test, external dependency objects need to construct. also the purpose of test, do we need to <code>Assertions</code>? and so on.<br/>
 2. with these in mind, we need to test the functionality of the methods. Is it a <code>AssertEqual()</code>,<code>AssertTrue()</code>,<code>Expected Exception</code>? How could we guarantee the coverage?<br/>
 3. How to mock the external dependency object. This is definitely a long story. Simplify by three steps, expect what the behavior and result, replay the workflow, verify the result.</p>

<p><strong>Reference</strong>  <br/>
1. <a href="http://jmock.org" title="JMock Official">JMock Website</a><br/>
2. <a href="http://easymock.org" title="EasyMock official">EasyMock Official</a> <br/>
3. <a href="http://michaelminella.com/testing/mock-controls-with-easymock.html" title="EasyMock Control Tutorial">EasyMock Control Tutorial</a> <br/>
4. <a href="http://tamasgyorfi.wordpress.com/2011/04/21/mocking-tutorial-part-1-jmock" title="JMock Tutorial">JMock Tutorial</a></p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>28 May 2015</span> &raquo; <a href="/2015/05/28/singleton-design-pattern.html">Singleton Design Pattern</a></li>
    
      <li><span>11 Nov 2014</span> &raquo; <a href="/2014/11/11/Common-ShortKey-And-Command-On-MacOSX.html">Common ShortKey And Command on MacOSX</a></li>
    
      <li><span>09 Aug 2014</span> &raquo; <a href="/translation/2014/08/09/add-comment-to-jekyll-blog-with-disqus.html">Add Comment to Jekyll Blog with Disqus</a></li>
    
  </ul>
</div>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'josepheng'; // required: replace example with your forum shortname
    /* * * This turns developer mode on, Make sure you remove this before you push this to your live site. * * * /
    /* * * var disqus_developer = 1;  * * * /

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>



  <div class="footer">
    <div class="contact">
      <p>
        Wei Heng<br />
        lengerfulluse@gmail.com
      </p>
    </div>
    <div class="contact">
      <p>
        <a href="http://github.com/lengerfulluse/">github.com/lengerfulluse</a><br />
      </p>
    </div>
    <div class="rss">
      <a href="http://feeds.feedburner.com/joseph-heng">
        <img src="/assets/img/rss.png" alt="Subscribe to RSS Feed" />
      </a>
    </div>
  </div>
</div>

<a href="http://github.com/lengerfulluse"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>

<!-- ClickTale Bottom part -->
<div id="ClickTaleDiv" style="display: none;"></div>
<script type="text/javascript">
if(document.location.protocol!='https:')
  document.write(unescape("%3Cscript%20src='http://s.clicktale.net/WRb.js'%20type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
if(typeof ClickTale=='function') ClickTale(206,0.3,"www03");
</script>
<!-- ClickTale end of Bottom part -->

<!-- Google Analytics -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-6016902-1");
pageTracker._trackPageview();
</script>
<!-- Google Analytics end -->

</body>
</html>
